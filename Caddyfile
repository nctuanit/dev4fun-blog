# Dev4Fun Blog - Caddyfile
# Copy this file to /etc/caddy/Caddyfile on your server
# Replace YOUR_DOMAIN with your actual domain

# Option 1: With domain (automatic HTTPS)
dev4fun.vn {
    reverse_proxy localhost:3101

    # Enable compression
    encode gzip zstd

    # Logging
    log {
        output file /var/log/caddy/dev4fun.log {
            roll_size 10mb
            roll_keep 5
        }
    }

    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
        Referrer-Policy strict-origin-when-cross-origin
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        -Server
    }

    # Cache static assets
    @static {
        path /_next/static/*
        path /static/*
        path *.ico
        path *.png
        path *.jpg
        path *.jpeg
        path *.gif
        path *.svg
        path *.webp
    }
    header @static Cache-Control "public, max-age=31536000, immutable"
}
